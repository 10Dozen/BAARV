<!doctype html>
<html lang="us">
	<head>
		<meta charset="utf-8">
		<title>AAR Viewer</title>
		
		<link rel="stylesheet" href="src/css/jquery-ui.css">
		<link rel="stylesheet" href="src/css/baarv_viewer.css">
		
		<script src="config.ini"></script>
		<script src="src/js/jquery.min.js"></script>
		<script src="src/js/jquery-ui.min.js"></script>
		<script src="src/js/jquery.panzoom.js"></script>
		<script src="src/js/jquery.mousewheel.js"></script>
		<script src="src/js/baarv_viewer.js"></script>
		
		<script>
			$( document ).ready(function () {
				$( "#slider" ).slider({
					range: "min",
					min: 0,
					max: 100,
					slide: function( event, ui ) {
						$( "#player-step > span" ).html( getTimeLabel(ui.value) );
						playReportStep ( ui.value ); 
						aarCurrentTime = ui.value;						
					},
					change: function( event, ui ) {
						if (ui.value == aarData.metadata.time) { stopReport(); }
					}
				});
				$( "#player-step > span" ).html( "0 s" );
				
				$( "#player-speed" ).selectmenu();
				$( "#player-step-backward" ).button({text: false,icons: { primary: "ui-icon-seek-prev" }})
					.click(function() { setPauseButtonIcon(); });
				$( "#player-step-forward" ).button({text: false,icons: {primary: "ui-icon-seek-next"}})
					.click(function() { setPauseButtonIcon(); });
				$( "#player-step-play" ).button({text: false,icons: {primary: "ui-icon-play"}})
					.click(function() {
						var options;
						if ( $( this ).text() === "play" ) {
							options = {label: "pause",icons: {primary: "ui-icon-pause"}};
						} else {
							options = {label: "play",icons: {primary: "ui-icon-play"}};
						}
						$( this ).button( "option", options );
					});
				$( "#player-info" ).button({text: false, icons: { primary: "ui-icon-info" }});
				
				$( "#player-line > button" ).attr( "disabled", "true" );
			});
		</script>
		
		
	</head>
	<body>
		<div class="panzoom"><img name="map" src="" /></div>
		
		<div id="player-line">			
			<button id="player-step-backward" onClick="reportPrevStep()">Prev second</button>
			<button id="player-step-play" onClick="playReportAuto()">Play report</button>
			<button id="player-step-forward" onClick="reportNextStep()">Next second</button>
			<select name="player-speed" id="player-speed">
				<optgroup label="Play speed">
					<option value="1">x1</option>
					<option value="2">x2</option>
					<option value="5">x5</option>
					<option value="10">x10</option>
					<option value="50">x50</option>
				</optgroup>
			</select>
			<div id="slider"></div>
			<div id="player-indicator">
				<label id="player-step"><span>0 sec</span> / 10 sec</label>					
			</div>
			<button id="player-info" onClick="whereAreUnits()">Info</button>
			<div id="player-header"> Loading... </div>
		</div>
		
		<div id="header">
			<div id="header-title">
				AAR Viewer
			</div>
			<div id="header-status">
				<button id="uploader-convert" onClick="initAAR()" disabled="true">Play</button>
				<label>Select AAR file to play...</label>
				<div id="uploader">
					<input type='file' accept='text/plain' onchange='openFile(event)'>
				</div>
			</div>
		</div>
		
		<div id="result-form">
			<ul>
				<li>
					<div class="dl-1">
						Mission name
					</div>
					<div class="dl-2" id="mission-name" />
				</li>
				<li>
					<div class="dl-1">
						Island
					</div>
					<div class="dl-2" id="mission-island" />
				</li>
				<li>
					<div class="dl-1">
						Date
					</div>
					<div class="dl-2" id="mission-date" />
				</li>
				<li>
					<div class="dl-1">
						Duration
					</div>
					<div class="dl-2">
						<div id="mission-time" />
					</div>
				</li>
				<li>
					<div class="dl-1">
						Description:
					</div>
					<div class="dl-3" id="mission-desc" ></div>
				</li>				
				<li>
					<div class="dl-1">
						<h4>Players</h4>
					</div>
					<ul id="player-list"></ul>
				</li>
			</ul>
		</div>
	</body>
</html>
